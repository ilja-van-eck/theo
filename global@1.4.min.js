document.addEventListener("DOMContentLoaded",(function(){let e,t;function o(){return window.matchMedia("(orientation: landscape) and (max-height: 500px)").matches}function n(){const o=document.querySelectorAll(".e-img"),n=document.querySelectorAll(".e-item");let a=0;function l(e){o.forEach((e=>{e.style.opacity=0})),n.forEach((e=>{e.style.opacity=0})),o[e].style.opacity=1,n[e].style.opacity=1}document.querySelector("[data-pagination-next]").addEventListener("click",(function(){a=(a+1)%o.length,l(a)})),document.querySelector("[data-pagination-prev]").addEventListener("click",(function(){a=(a-1+o.length)%o.length,l(a)})),l(a);let r=document.getElementById("cameraView"),i=document.querySelector(".page-w");r.style.display="block",i.style.visibility="hidden",t||(t=document.createElement("video"),t.setAttribute("playsinline",""),t.setAttribute("autoplay",""),t.setAttribute("muted",""),t.classList.add("bg-vid"),t.style.transform="scaleX(-1)",r.appendChild(t));const s={video:{facingMode:"user"},audio:!1};navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(s).then((function(o){e=o,t.srcObject=o})).catch((function(e){console.error("Error accessing the camera: ",e)})):console.error("Your browser does not support getUserMedia API")}o()&&n(),window.addEventListener("resize",(function(){if(o())n();else{e&&(e.getTracks().forEach((e=>e.stop())),e=null),document.getElementById("cameraView").style.display="none",t&&(t.srcObject=null);let o=document.getElementById("cameraView"),n=document.querySelector(".page-w");o.style.display="none",n.style.display="block"}}))})),gsap.defaults({ease:"power4.inOut",duration:.6});let modelColumn,openedColumn=null,thirdColumn=!1,fourthColumn=!1;function toggleMenu(e){let t=e.getAttribute("data-menu-link"),o=e.querySelector(".h-reg").innerText,n=document.querySelector(`[data-menu="${t}"]`);n.querySelectorAll("[data-menu-name").forEach((e=>{e.innerText=o}));let a=document.querySelector('[data-menu="country"]'),l=document.querySelector('[data-menu="family"]'),r=document.querySelector('[data-menu="stores"]');modelColumn=document.querySelector('[data-menu="model"]');let i=document.querySelector('[data-menu="collections"]');if("family"===t&&fourthColumn&&gsap.to(modelColumn,{x:"-201%",duration:.4,ease:"power3.out",onComplete:()=>{gsap.set(modelColumn,{display:"none"})}}),n!==openedColumn)if(n!==a&&n!==l||(thirdColumn=!0),n===modelColumn&&(fourthColumn=!0),document.querySelectorAll(".menu-link.is--main").forEach((t=>{e.classList.contains("is--main")&&t.classList.toggle("is--inactive",t!==e)})),"family"!==t&&"country"!==t){if(thirdColumn)return gsap.to([r,i],{x:"-101%",duration:.5,onComplete:()=>{gsap.set([r,i],{display:"none"}),openedColumn=n,gsap.set(n,{display:"block"}),gsap.fromTo(n,{x:"-101%"},{x:"0%"}),gsap.to("[data-info-line]",{y:"100%",autoAlpha:0,ease:"power3.out",stagger:{each:.02,from:"end"}}),document.querySelectorAll(".menu-link.is--country").forEach((e=>{e.classList.remove("is--inactive")}))}}),gsap.to([a,l],{x:"-201%",duration:.4,onComplete:()=>{gsap.set([a,l],{display:"none"}),openedColumn=null,thirdColumn=null}}),void(fourthColumn&&gsap.to(modelColumn,{x:"-301%",duration:.4,onComplete:()=>{gsap.set(modelColumn,{display:"none"}),fourthColumn=!1}}));gsap.to(openedColumn,{x:"-101%",duration:openedColumn?.4:0,onComplete:()=>{gsap.set(openedColumn,{display:"none"}),openedColumn=n,gsap.set(n,{display:"block"}),gsap.fromTo(n,{x:"-101%"},{x:"0%"}),gsap.to("[data-info-line]",{y:"100%",autoAlpha:0,ease:"power3.out",stagger:{each:.02,from:"end"}})}})}else openedColumn=n,gsap.set(n,{display:"block"}),gsap.fromTo(n,{x:"-101%"},{x:"0%"}),gsap.to("[data-info-line]",{y:"100%",autoAlpha:0,ease:"power3.out",stagger:{each:.02,from:"end"}})}function closeMenu(e){let t=e.getAttribute("data-menu-close"),o=document.querySelector(`[data-menu="${t}"]`);openedColumn?(gsap.to(o,{x:"-101%",duration:.5,onComplete:()=>{gsap.set(o,{display:"none"})}}),o!==modelColumn&&gsap.to(openedColumn,{x:"-201%",duration:.4,onComplete:()=>{gsap.set(openedColumn,{display:"none"}),openedColumn=null}}),fourthColumn&&gsap.to(modelColumn,{x:"-201%",duration:.4,onComplete:()=>{gsap.set(modelColumn,{display:"none"}),fourthColumn=!1}}),gsap.to("[data-info-line",{y:"0%",autoAlpha:1,ease:"power3.out",stagger:{each:.02,from:"start"}})):o&&(gsap.to(o,{x:"-101%",duration:.4,onComplete:()=>{gsap.set(o,{display:"none"})}}),gsap.to("[data-info-line",{y:"0%",autoAlpha:1,ease:"power3.out",stagger:{each:.02,from:"start"}})),["contact","stores","collections","wishlist"].includes(t)?document.querySelectorAll(".menu-link").forEach((e=>{e.classList.remove("is--inactive")})):"model"===t&&document.querySelectorAll(".product-item.is--menu").forEach((e=>{e.classList.remove("is--inactive")}))}function openMainMenu(){gsap.to(".cursor-main",{autoAlpha:0,y:"1rem",overwrite:!0});let e=gsap.timeline();gsap.set(".menu-w",{display:"flex"});let t=document.querySelector(".main-w").getAttribute("data-barba-namespace");currentTimeline&&currentTimeline.reverse(),e.to(".menu-col.is--main",{x:0,duration:.6}).to("#menu-button",{color:"transparent",duration:.4,onStart:()=>{gsap.set(".nav-w",{pointerEvents:"none"})}},0).fromTo(".menu-link.is--main",{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",duration:.45,stagger:.05,clearProps:"all"},"0.3").from("[data-info-line]",{autoAlpha:0,y:"50%",duration:.45,stagger:.05},"<").to("[data-nav-fade]",{autoAlpha:0,y:"1rem",duration:.45,stagger:.025},0).to(".tl-line__wrap",{scaleX:0,duration:.45},0).fromTo(".menu-bg",{opacity:0},{opacity:1,duration:.45},0),"play"!==t&&e.fromTo(".menu-bg",{backdropFilter:"blur(0px)"},{backdropFilter:"blur(20px)",duration:.4},0).to(".nav-w",{yPercent:-100,duration:.45},0)}function closeMainMenu(){lenis.start();let e=document.querySelector(".main-w").getAttribute("data-barba-namespace"),t="stores"===e;const o=gsap.timeline({onComplete:()=>{gsap.set(".menu-w",{display:"none"}),gsap.set(".menu-col:not(.is--main)",{display:"none"}),t||gsap.set(".nav-w",{pointerEvents:"auto"})},onStart:()=>{gsap.set(".nav-w",{pointerEvents:"none"})}});o.to(".menu-col.is--main",{x:"-101%",duration:.5}).to("[data-nav-fade]",{autoAlpha:1,y:"0rem",duration:.35,stagger:.025},0).to("[data-info-line]",{autoAlpha:1,y:"0%",duration:.35,stagger:.025},0).to(".tl-line__wrap",{scaleX:1,duration:.35},0).to("#menu-button",{color:"#fff",duration:.4,clearProps:"all",onEnd:()=>{gsap.set(".nav-w",{pointerEvents:"auto",clearProps:!0})}},0).to(".menu-bg",{opacity:0,duration:.45},0).to(".nav-bg",{height:navBoolean?"100%":"0%",duration:.45},0).to(".nav-w",{y:0,opacity:1,duration:.45},0).to(['[data-menu="stores"]','[data-menu="collections"]'],{x:"-201%",duration:.5,onComplete:()=>{gsap.set(['[data-menu="stores"]','[data-menu="collections"]'],{display:"none"}),openedColumn=null}},0),openedColumn&&o.to(openedColumn,{x:"-301%",duration:.5,onComplete:()=>{gsap.set(openedColumn,{display:"none"}),openedColumn=null}},0),fourthColumn&&o.to(modelColumn,{x:"-401%",duration:.5,onComplete:()=>{gsap.set(modelColumn,{display:"none"}),fourthColumn=!1}},0),openedColumn&&(openedColumn.matches(".menu-col.is--family")||openedColumn.matches(".menu-col.is--stores"))&&o.to([".menu-col.is--collection",".menu-col.is--countries"],{x:"-201%",duration:.5,onComplete:()=>{gsap.set(".menu-col.is--collection",{display:"none"}),gsap.set(".menu-col.is--countries",{display:"none"}),openedColumn=null}},0),"play"!==e&&o.fromTo(".menu-bg",{backdropFilter:"blur(20px)"},{backdropFilter:"blur(0px)",duration:.4},0),document.querySelectorAll(".menu-link").forEach((e=>{e.classList.remove("is--inactive")}))}document.querySelectorAll("[data-menu-link]").forEach((e=>{e.addEventListener("click",(()=>toggleMenu(e)))})),document.querySelectorAll("[data-menu-close]").forEach((e=>{e.addEventListener("click",(()=>{"main"===e.getAttribute("data-menu-close")?closeMainMenu():closeMenu(e)}))})),document.getElementById("menu-button").addEventListener("click",openMainMenu),document.getElementById("menu-bg").addEventListener("click",closeMainMenu),document.getElementById("close-button").addEventListener("click",closeMainMenu),document.querySelectorAll(".menu-link.is--country").forEach((e=>{e.addEventListener("click",(function(){document.querySelectorAll(".menu-link.is--country").forEach((e=>{e.classList.add("is--inactive")})),this.classList.remove("is--inactive")}))}));let storeLinks=document.querySelectorAll('[data-menu-link="country"]');storeLinks.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("data-url"),o=`${window.location.origin}/countries/${t}`;function n(){fetch(o).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-store-list]"),o=document.querySelector("[data-store-wrap]");t&&o&&(o.innerHTML=t.innerHTML),openedColumn&&gsap.to(openedColumn,{xPercent:0,ease:"power3.out",duration:.5})})).catch((e=>{console.error("There has been a problem with your fetch operation:",e)}))}openedColumn?gsap.fromTo(openedColumn,{xPercent:0},{xPercent:-101,ease:"power3.out",duration:.5,onComplete:n}):n()}))}));let familyLinks=document.querySelectorAll('[data-menu-link="family"]'),modelLinks=document.querySelectorAll('[data-menu-link="model"]'),familyButton=document.querySelectorAll("[data-family-button]");function initModelLinks(e){e.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=this.getAttribute("data-url"),n=`${window.location.origin}/mothers/${o}`;document.querySelectorAll(".product-item.is--menu").forEach((t=>{t.classList.toggle("is--inactive",t!==e)}));let a=e.querySelector(".h-reg").innerText,l=document.querySelector('[data-menu="model"]'),r=l.querySelectorAll('[data-crumb-4="text"]'),i=l.querySelector("[data-menu-name]");function s(){fetch(n).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("[data-model-item]"),o=document.querySelector("[data-menu-models]");t.length>0&&o&&(o.innerHTML="",t.forEach((e=>{e.classList.remove("is--wide"),e.classList.add("is--model");const t=e.querySelector(".product-item__img");t&&(t.classList.remove("is--wide"),t.classList.add("is--model")),o.appendChild(e),savedModels=getSavedModels(),updateAllSaveIcons(savedModels),setupSaveIconClickHandlers()}))),fourthColumn&&(gsap.set(modelColumn,{display:"flex"}),gsap.fromTo(modelColumn,{x:"-101%"},{x:"0%",ease:"power3.out",duration:.5,overwrite:"true"}))})).catch((e=>{console.error("There has been a problem with your fetch operation:",e)}))}r.forEach((e=>{e.innerText=a})),i.innerText=a,fourthColumn?gsap.fromTo(modelColumn,{x:"0%"},{x:"-101%",ease:"power3.out",duration:.5,overwrite:"true",onComplete:()=>{s(),l.scrollTop=0}}):(fourthColumn=!0,s())}))}))}function initFamilyPage(){ScrollTrigger.refresh();let e,t,o=document.querySelector(".nav-w"),n=document.querySelectorAll(".tl-item");o.setAttribute("state","default"),o.classList.remove("scrolled"),setTimeout((function(){e=document.querySelector("[data-index]").textContent,t=parseInt(e,10)-1,n.forEach(((e,o)=>{e.classList.remove("hovered");let n=e.querySelector(".item-dot");gsap.to(n,{backgroundColor:"#fff",duration:.2,clearProps:"backgroundColor"}),o!==t?e.classList.remove("active"):e.classList.add("active")}))}),50),gsap.to(".modal-close",{height:"0rem",duration:.45,ease:"expo.out"});let a=new Swiper(".swiper.is--family",{slidesPerView:"auto",spaceBetween:40,centeredSlides:!0,speed:800,keyboard:{enabled:!0},mousewheel:{invert:!1}});n.forEach(((e,t)=>{e.addEventListener("click",(()=>{a.slideTo(t,1e3),gsap.set(".nav-bg",{height:"100%"})}))})),a.on("slideChangeTransitionEnd",(function(){let e=document.querySelector(".swiper-slide-active").getAttribute("data-slide-score"),t=parseInt(e,10)-1;n.forEach((e=>e.classList.remove("hovered"))),t>=0&&t<n.length&&n[t].classList.add("hovered")}));let l=gsap.timeline({}),r=!1,i=document.querySelector(".family-nav").querySelectorAll(".bg-vid");i.forEach((e=>{e.dataset.readyToPlay="false",e.addEventListener("loadeddata",(function(){this.dataset.readyToPlay="true"})),e.load()})),showFamilySlider=function(){r||(r=!0,e=document.querySelector("[data-index]").textContent,a.slideTo(e-1,0,!1),lenis.stop(),isMobile()&&gsap.set(".nav-page__bg",{pointerEvents:"auto"}),l.clear().progress(0),l.to(".family-nav",{height:"auto",ease:"expo.out",duration:.8}).to(".nav-bg",{height:"100%",ease:"expo.out",duration:.8},0).fromTo(".nav-page__bg",{opacity:0},{opacity:1,ease:"expo.out",duration:.8},0).fromTo(".swiper-slide.is--family",{opacity:0,yPercent:50},{opacity:1,yPercent:0,ease:"expo.out",duration:1,stagger:{each:.06}},0),i.forEach((e=>{"true"===e.dataset.readyToPlay?e.play():e.addEventListener("loadeddata",(function(){this.play()}),{once:!0})})))},hideFamilySlider=function(){r=!1,gsap.set(".nav-page__bg",{pointerEvents:"none",clearProps:"pointerEvents"}),lenis.start(),l.clear().progress(0),l.to(".family-nav",{height:"0px",ease:"expo.out",duration:.6}).to(".nav-bg",{height:navBoolean?"100%":"0%",overwrite:!0,ease:"expo.out",duration:.6},0).to(".nav-page__bg",{opacity:0,ease:"expo.out",duration:.6},0).fromTo(".swiper-slide.is--family",{opacity:1,yPercent:0},{opacity:0,yPercent:50,ease:"expo.out",duration:.8,stagger:{each:.02},onStart:()=>{n.forEach((e=>e.classList.remove("hovered")))}},0),i.forEach((e=>{e.pause()}))};let s=document.querySelector(".tl-w"),c=document.querySelector(".nav-w"),d=document.querySelector(".nav-page__bg");isMobile()?(s.addEventListener("click",showFamilySlider,!1),d.addEventListener("click",hideFamilySlider,!1)):(s.addEventListener("mouseenter",showFamilySlider,!1),c.addEventListener("mouseleave",hideFamilySlider,!1));let u=document.querySelector("[data-share-link]"),m=u.querySelector("[data-share-text]");u.addEventListener("click",(()=>{navigator.clipboard.writeText(window.location.href).then((()=>{let e=m.innerText;m.innerText="Copied link to clipboard",setTimeout((()=>{m.innerText=e}),3e3)}))})),gsap.delayedCall(.1,(()=>{let e=document.querySelector("[data-toggle-nav]"),t=document.querySelector("[data-family-end]"),n=o.querySelector(".nav-bg");ScrollTrigger.create({trigger:e,start:"top top+=5%",onEnter:function(){o.classList.add("scrolled"),navBoolean=!0,gsap.to(n,{height:"100%",duration:.45,ease:"expo.out",overwrite:!0})},onLeaveBack:function(){o.classList.remove("scrolled"),navBoolean=!1,gsap.to(n,{height:"0%",duration:.45,ease:"expo.out",overwrite:!0})}}),ScrollTrigger.create({trigger:t,start:"top top+=5%",onEnter:function(){o.classList.remove("scrolled"),navBoolean=!1,gsap.to(n,{height:"0%",duration:.45,ease:"expo.out",overwrite:!0})},onLeaveBack:function(){o.classList.remove("scrolled"),navBoolean=!0,gsap.to(n,{height:"100%",duration:.45,ease:"expo.out",overwrite:!0})}})})),function(){let e=document.querySelector('[data-modal="lightbox"]');if(!e)return;let t=document.querySelector('[data-modal="lightbox-modal"]'),o=document.querySelector(".modal-close"),n=document.querySelectorAll('[data-modal="cms-link"]'),a=document.querySelector(".modal-close");n.forEach((l=>{l.addEventListener("click",(function(l){l.preventDefault(),t.innerHTML="",gsap.to(".f-overlay",{opacity:.5,duration:1});let r=this.getAttribute("href");fetch(r).then((e=>e.text())).then((l=>{let r=(new DOMParser).parseFromString(l,"text/html"),i=r.querySelector('[data-modal="cms-page-content"]');r.querySelector("title").textContent,window.location.origin;t.appendChild(i),currentTimeline=function(o){var n=o.querySelectorAll('[data-modal="page-link"]'),l=o.querySelectorAll('[data-modal="page-detail"]');let r=gsap.timeline({defaults:{ease:"expo.inOut",duration:.45},onReverseComplete:()=>{lenis.start()},onStart:()=>{lenis.stop(),initialNav=navBoolean,navBoolean=!0}});return r.set(e,{display:"block",onComplete:()=>{t.scrollTop=0,navBoolean=initialNav}}).fromTo(t,{y:"100vh"},{y:"0vh",duration:1},0).to(".nav-bg",{height:"100%"},0).fromTo(a,{height:"0rem"},{height:"3.5rem"},.55).fromTo([...n,...l],{opacity:0,yPercent:50},{opacity:1,yPercent:0,duration:.5,overwrite:!0,stagger:{each:.05}},.4),window.innerWidth<992&&r.to("[data-nav-fade]",{autoAlpha:0,y:"1rem",duration:.35,stagger:.025},0),r}(i),currentTimeline.timeScale(1).play(),function(){let t=e.querySelectorAll("button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])");t[t.length-1].addEventListener("focusout",(function(){o.focus()}))}(),setupSaveIconClickHandlers(),updateAllSaveIcons(savedModels),document.querySelectorAll('[data-modal="page-link"]').forEach(((e,t)=>{e.addEventListener("click",(function(e){n=null,n=document.querySelectorAll('[data-modal="cms-link"]'),e.preventDefault();var o=t;currentTimeline.timeScale(1.4).reverse().eventCallback("onReverseComplete",(function(){n[o].click()}))}))}))}))}))})),new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0,view:window}),o.addEventListener("click",(function(){currentTimeline&&(currentTimeline.reverse(),gsap.to(".f-overlay",{opacity:0,duration:.6}))})),document.addEventListener("keydown",(function(t){!e.contains(t.target)&&currentTimeline&&(currentTimeline.reverse(),gsap.to(".f-overlay",{opacity:0,duration:.6}))})),document.addEventListener("click",(function(e){"Escape"===e.key&&currentTimeline&&(currentTimeline.reverse(),gsap.to(".f-overlay",{opacity:0,duration:.6}))}))}(),setTimeout((()=>{document.querySelectorAll(".family-video").forEach((e=>{e.play()}))}),500)}familyButton.forEach((e=>{e.addEventListener("click",closeMainMenu)})),familyLinks.forEach((e=>{e.addEventListener("click",(function(t){t.preventDefault();const o=this.getAttribute("data-url"),n=`${window.location.origin}/families/${o}`;familyButton.forEach((e=>{e.setAttribute("href",n)})),document.querySelectorAll(".menu-link.is--collection").forEach((t=>{t.classList.toggle("is--inactive",t!==e)}));let a=e.querySelector(".h-reg").innerText;function l(){fetch(n).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.text()})).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html").querySelectorAll("[data-family-item]"),o=document.querySelector("[data-family-wrap]");t.length>0&&o&&(o.innerHTML="",t.forEach((e=>{e.classList.add("is--menu"),e.removeAttribute("data-modal"),e.setAttribute("data-menu-link","model"),e.removeAttribute("href"),e.style.cursor="pointer";const t=e.querySelector(".product-item__img");t&&(t.classList.remove("product-item__img"),t.classList.add("menu-family__img")),o.appendChild(e)})),modelLinks=document.querySelectorAll('[data-menu-link="model"]'),initModelLinks(modelLinks)),openedColumn&&gsap.to(openedColumn,{xPercent:0,ease:"power3.out",duration:.5})})).catch((e=>{console.error("There has been a problem with your fetch operation:",e)}))}modelColumn.querySelectorAll('[data-crumb-3="text"]').forEach((e=>{e.innerText=a})),openedColumn?gsap.fromTo(openedColumn,{xPercent:0},{xPercent:-101,ease:"power3.out",duration:.5,onComplete:l}):l()}))})),document.querySelectorAll("[data-email-link]").forEach((e=>{let t;const o=e.parentElement.querySelector("[data-email-text]");e.addEventListener("mouseenter",(()=>{t=o.textContent,o.textContent="click to copy email"})),e.addEventListener("mouseleave",(()=>{o.textContent=t})),e.addEventListener("click",(()=>{o.textContent="copied email address!",navigator.clipboard.writeText(e.textContent).then((()=>{setTimeout((()=>{o.textContent=t}),2e3)}))}))})),window.innerWidth<480&&document.querySelectorAll(".menu-close").forEach((e=>{e.setAttribute("data-menu-close","main")}));let savedModels=getSavedModels();updateAllSaveIcons(savedModels),checkAndToggleShareButtonVisibility(),toggleWishlistEmptyState(),gsap.delayedCall(1,(()=>{setupSaveIconClickHandlers()}));const urlParams=new URLSearchParams(window.location.search),wishlistItemsFromURL=urlParams.get("wishlist");if(wishlistItemsFromURL){const e=wishlistItemsFromURL.split(",").map(decodeURIComponent).map(slugifyModelName);savedModels=[...new Set([...savedModels,...e])],updateAllSaveIcons(savedModels)}function slugifyModelName(e){return e.toLowerCase().replace(/[\s+\/]/g,"-")}function getSavedModels(){let e=JSON.parse(localStorage.getItem("savedModels")||"[]").map(slugifyModelName);const t=new URLSearchParams(window.location.search).get("wishlist");if(t){const o=t.split(",").map(decodeURIComponent).map(slugifyModelName);e=[...new Set([...e,...o])],localStorage.setItem("savedModels",JSON.stringify(e))}return e}function updateAllSaveIcons(e){document.querySelectorAll(".save-icon").forEach((t=>{const o=slugifyModelName(t.getAttribute("data-model"));e.includes(o)?t.classList.add("is--saved"):t.classList.remove("is--saved")}))}function updateWishlistSaveIcons(){const e=document.querySelector("[data-wishlist-wrap]");e&&e.querySelectorAll(".save-icon").forEach((e=>{e.classList.add("is--saved")}))}function setupSaveIconClickHandlers(){document.querySelectorAll(".save-icon").forEach((e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",(function(){toggleModelIdInLocalStorage(this.getAttribute("data-model"),this),checkAndToggleShareButtonVisibility(),toggleWishlistEmptyState(),updateWishlistSaveIcons()}))}))}function toggleModelIdInLocalStorage(e,t){let o=JSON.parse(localStorage.getItem("savedModels")||"[]").map(slugifyModelName);const n=slugifyModelName(e),a=o.indexOf(n);if(-1===a){o.push(n),t.classList.add("is--saved");fetchModelItem(`/models/${slugifyModelName(e)}`,document.querySelector("[data-wishlist-wrap]"))}else{o.splice(a,1),t.classList.remove("is--saved");const n=t.closest(".product-item");n&&!n.classList.contains("is--model")&&n.remove();const l=document.querySelector(`[data-wishlist-item="${e}"]`);l&&l.remove()}localStorage.setItem("savedModels",JSON.stringify(o)),checkAndToggleShareButtonVisibility(),toggleWishlistEmptyState()}function fetchModelItem(e,t){return new Promise(((o,n)=>{fetch(e).then((e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.text()})).then((e=>{const a=(new DOMParser).parseFromString(e,"text/html").querySelector("[data-wishlist-item]");if(a){if(t.classList.contains("wishlist-inner")){a.classList.add("is--wish__page");let e=a.querySelector(".menu-family__img");e.classList.remove("is--wishlist"),e.classList.remove("menu-family__img"),e.classList.add("wishlist-img")}t.appendChild(a),savedModels=getSavedModels(),updateAllSaveIcons(savedModels),setupSaveIconClickHandlers(),o()}else n("Wishlist item not found in the response")})).catch((e=>{n(e)}))}))}function checkAndToggleShareButtonVisibility(){const e=JSON.parse(localStorage.getItem("savedModels")||"[]"),t=document.querySelector('[data-wishlist="share"]');t&&(0===e.length?t.classList.add("u--hide"):t.classList.remove("u--hide"))}function toggleWishlistEmptyState(){const e=JSON.parse(localStorage.getItem("savedModels")||"[]"),t=document.querySelectorAll(".wishlist-empty"),o=document.querySelector(".wishlist-container");t&&(t.forEach((t=>{t.style.display=0===e.length?"flex":"none"})),o&&gsap.set(o,{background:0===e.length?"transparent":"#fff"}))}function loadWishlistItems(e){if(0===e.length)return;const t=document.querySelector("[data-wishlist-wrap]");if(!t)return;let o=e.map((e=>fetchModelItem(`/models/${e}`,t)));Promise.all(o).then((()=>{updateWishlistSaveIcons(),updateAllSaveIcons(e),setupSaveIconClickHandlers()}))}function loadWishlistItemsOnPage(e){const t=document.querySelector(".wishlist-inner");if(!t||0===e.length)return;let o=e.map((e=>fetchModelItem(`/models/${e}`,t)));Promise.all(o).then((()=>{updateAllSaveIcons(e)}))}function generateShareableLink(){const e=getSavedModels().map(encodeURIComponent).join(","),t=`${window.location.origin}/wishlist?wishlist=${e}`;let o=document.querySelector('[data-wishlist="button-text"]');navigator.clipboard.writeText(t).then((()=>{let e=o.innerText;o.innerText="Copied to clipboard",setTimeout((()=>{o.innerText=e}),3e3)})).catch((e=>{console.error("Failed to copy URL:",e)}))}loadWishlistItems(savedModels),loadWishlistItemsOnPage(savedModels);const shareButton=document.querySelector('[data-wishlist="share"]');shareButton&&shareButton.addEventListener("click",generateShareableLink);
