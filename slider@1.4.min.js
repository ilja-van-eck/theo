function initSlider(){document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector(".tl-line");function t(){var t=lenis.progress,r=isMobile()?1.13:1,o=Math.min(t*r,1);gsap.set(e,{scaleX:o,ease:"none"})}lenis.on("scroll",t),t();let r=document.querySelector(".slide-end"),o=document.querySelector(".slider-list");function n(){return window.matchMedia("(max-width: 991px)").matches}r&&o&&o.appendChild(r),gsap.from(".slide-end__inner",{xPercent:n()?0:-75,opacity:0,ease:"none",scrollTrigger:{trigger:".slide-end",start:n()?"top bottom":"left right",end:n()?"top top":"left center",scrub:!0,horizontal:!n()}});let l=gsap.utils.toArray(".slider-item");l.forEach(((e,t)=>{let r=e.querySelector(".slide-bg__wrap");gsap.timeline({scrollTrigger:{trigger:e,start:n()?"top bottom":"left right",end:n()?"top top":"left left",scrub:!0,horizontal:!n(),snap:{snapTo:n()?[0,1]:[0,.5,1],duration:{min:.1,max:.6},ease:"expo.out"},onToggle:()=>{n()&&gsap.to("[data-home-info]",{opacity:0,y:"1.5rem",duration:.3,ease:"power3.out"})},onSnapComplete:()=>{n()&&gsap.to("[data-home-info]",{opacity:1,y:"0rem",duration:.3,ease:"power3.out"})}}}).fromTo(r,{xPercent:n()?0:-50},{xPercent:0,yPercent:0,ease:"none",duration:1}).addLabel(t,"1"),gsap.fromTo(e,{xPercent:0,yPercent:0},{xPercent:n()?0:100,ease:"none",scrollTrigger:{trigger:e,start:n()?"top top":"left left",end:n()?"bottom top":"right left",scrub:!0,horizontal:!n()}})}));let i=l.length,a=isMobile()?window.innerHeight*i:.5*window.innerWidth*i,c=document.querySelectorAll(".tl-item");function s(e,t){e.forEach((e=>{const t=e.target,r=t.querySelector(".bg-vid"),o=t.querySelector(".slide-vid");e.isIntersecting?(r&&r.play(),o&&o.play(),r&&o&&r.currentTime!==o.currentTime&&(r.currentTim=o.currentTime)):(r&&r.pause(),o&&o.pause())}))}c.forEach(((e,t)=>{const r=function(e,t,r){return function(){let o=r/t.length*e;console.log(o),lenis.scrollTo(o,{duration:1,lerp:.1,lock:!0,force:!0})}}(t,c,a);e.addEventListener("click",r),e._clickHandler=r})),removeEventListeners=function(){c.forEach((e=>{e._clickHandler&&(e.removeEventListener("click",e._clickHandler),delete e._clickHandler)}))},l.forEach(((e,t)=>{let r=e.querySelector(".slide-vid"),o=e.querySelector(".bg-vid"),n=e.querySelector("[data-rating]"),i=n?n.textContent.trim():null,a=e.querySelector("[data-color]").style.backgroundColor;if(window.innerWidth<992){const e=new IntersectionObserver(s,{root:null,rootMargin:"0px",threshold:.5});l.forEach((t=>{e.observe(t)}))}else e.addEventListener("mouseenter",(()=>{if(r&&(r.volume=0,r.play()),o&&o.play(),"m"!==i){let e=parseInt(i,10)-1,t=document.querySelectorAll(".tl-item")[e];if(t){t.classList.add("active");let e=t.querySelector(".item-dot");e&&(e.style.backgroundColor=a)}}})),e.addEventListener("mouseleave",(()=>{if(r&&r.pause(),o&&o.pause(),"m"!==i){let e=parseInt(i,10)-1,t=document.querySelectorAll(".tl-item")[e];if(t){t.classList.remove("active");let e=t.querySelector(".item-dot");e&&(e.style.backgroundColor="white")}}}))}))}))}
