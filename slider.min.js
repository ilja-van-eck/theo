function initSlider(){document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".tl-line");function t(){var t=lenis.progress,r=window.innerWidth<992?1.13:1;gsap.set(e,{scaleX:Math.min(t*r,1),ease:"none"})}lenis.on("scroll",t),t();let r=document.querySelector(".slide-end"),o=document.querySelector(".slider-list");function i(){return window.matchMedia("(max-width: 991px)").matches}r&&o&&o.appendChild(r),gsap.from(".slide-end__inner",{xPercent:i()?0:-75,opacity:0,ease:"none",scrollTrigger:{trigger:".slide-end",start:i()?"top bottom":"left right",end:i()?"top top":"left center",scrub:!0,horizontal:!i()}});let l=gsap.utils.toArray(".slider-item");l.forEach((e,t)=>{let r=e.querySelector(".slide-bg__wrap");gsap.timeline({scrollTrigger:{trigger:e,start:i()?"top bottom":"left right",end:i()?"top top":"left left",scrub:!0,horizontal:!i(),snap:{snapTo:i()?[0,1]:[0,.5,1],duration:{min:.1,max:.6},ease:"expo.out"},onToggle(){i()&&gsap.to("[data-home-info]",{opacity:0,y:"1.5rem",duration:.3,ease:"power3.out"})},onSnapComplete(){i()&&gsap.to("[data-home-info]",{opacity:1,y:"0rem",duration:.3,ease:"power3.out"})}}}).fromTo(r,{xPercent:i()?0:-50},{xPercent:0,yPercent:0,ease:"none",duration:1}).addLabel(t,"1"),gsap.fromTo(e,{xPercent:0,yPercent:0},{xPercent:i()?0:100,ease:"none",scrollTrigger:{trigger:e,start:i()?"top top":"left left",end:i()?"bottom top":"right left",scrub:!0,horizontal:!i()}})});let n=l.length,a=.5*window.innerWidth*n,c=document.querySelectorAll(".tl-item");function d(e){let t,r=!e.hasAttribute("data-video-url-mobile");(t=window.innerWidth<480&&!r?e.getAttribute("data-video-url-mobile"):e.getAttribute("data-video-url"))?(e.src=t,e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.setAttribute("autoplay",""),e.load()):console.log("No video source found for",r?"main video":"background video")}function u(e,t){e.forEach(e=>{let t=e.target,r=t.querySelector(".bg-vid"),o=t.querySelector(".slide-vid");e.isIntersecting?(r&&r.play(),o&&o.play(),r&&o&&r.currentTime!==o.currentTime&&(o.currentTime=r.currentTime)):(r&&r.pause(),o&&o.pause())})}function s(e,t=!0,r=!1){let o;o=r&&window.innerWidth<480?e.getAttribute("data-video-url-mobile"):e.getAttribute("data-video-url"),e&&!e.src&&o?fetch(o).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.blob()}).then(r=>{e.src=URL.createObjectURL(r),e.load(),t&&e.play()}).catch(e=>{console.warn("Video playback failed",e)}):t&&e.src&&e.play()}c.forEach((e,t)=>{e.addEventListener("click",()=>{let e=a/c.length;lenis.scrollTo(e*t,{duration:1,lerp:.1,lock:!0,force:!0})})}),window.innerWidth<992&&l.forEach(e=>{let t=e.querySelector(".bg-vid"),r=e.querySelector(".slide-vid");t&&d(t),r&&(d(r),r.currentTime=t.currentTime)}),l.forEach((e,t)=>{let r=e.querySelector(".slide-vid"),o=e.querySelector(".bg-vid"),i=e.querySelector("[data-rating]"),n=i?i.textContent.trim():null,a=e.querySelector("[data-color]").style.backgroundColor;if(o&&s(o,!1,!0),window.innerWidth<992){let c=new IntersectionObserver(u,{root:null,rootMargin:"0px",threshold:.5});l.forEach(e=>{c.observe(e)})}else o&&s(o,!1,!0),e.addEventListener("mouseenter",()=>{if(r&&(s(r),o&&o.currentTime&&(r.currentTime=o.currentTime),r.volume=0,r.play()),o&&o.play(),"m"!==n){let e=parseInt(n,10)-1,t=document.querySelectorAll(".tl-item")[e];if(t){t.classList.add("active");let i=t.querySelector(".item-dot");i&&(i.style.backgroundColor=a)}}}),e.addEventListener("mouseleave",()=>{if(r&&r.pause(),o&&o.pause(),"m"!==n){let e=parseInt(n,10)-1,t=document.querySelectorAll(".tl-item")[e];if(t){t.classList.remove("active");let i=t.querySelector(".item-dot");i&&(i.style.backgroundColor="white")}}})})})}